<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poem Results</title>
    <style>
        body { margin: 0; background-color: black; overflow: hidden; }
#face-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
#poem-text { position: absolute; top: 10px; left: 10px; color: white; font-size: 1.2em;display: none; }
#emotion-vector-container {
    position: absolute;
    top: 50px;
    left: 10px;
    color: white;
    background-color: rgba(0, 0, 0, 0.7);
    padding: 10px;
    border-radius: 10px;
    max-width: 300px;
    font-family:'Times New Roman', Times, serif
}
#controls { position: absolute; bottom: 10px; left: 10px; color: white; }
button {
    background-color:rgb(69, 149, 247);
    color: rgb(254, 255, 255);
    border: none;
    padding: 10px 20px;
    margin: 5px;
    border-radius: 5px;
    cursor: pointer;
}
.circle-btn {
    border-radius: 50%; /* Circular shape */
    width: 50px; /* Circle size */
    height: 50px;
    text-align: center;
    vertical-align: middle;
    line-height: 50px; /* Align text vertically */
    border: none;
    background-color: #4CAF50; /* Green background */
    color: white;
    cursor: pointer;
}
        
    </style>
    <script type="importmap">
        {
            "imports": {
                "three": "./three.js-dev/build/three.module.js",
                "three/addons/": "./three.js-dev/examples/jsm/"
            }
        }
    </script>
    <script type="module" src="results.js"></script>

    
</head>
<body>
    <div id="face-container"></div>
    <div id="poem-text"></div>
   
    <div id="emotion-vector-container"></div>
    <div id="controls">
        <button id="prevPoem">Previous</button>
        <button id="nextPoem">Next</button>
        <button id="backToSearch">Back to Search</button>
        <button id="scrollUp">Scroll Up</button>
        <button id="scrollDown">Scroll Down</button>
        <button id="interpretButton" class="circle-btn">Interpret Poem</button>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const backendUrl = 'https://poems-backend-fbe3c465d5f2.herokuapp.com';
        
                function interpretPoem() {
                    const poemText = document.getElementById('poem-text').textContent;
                    fetch(`${backendUrl}/interpret_poem`, {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        debug: true,
                        body: JSON.stringify({ poem: poemText })
                    })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Network response was not ok ' + response.statusText);
                        }
                        return response.json();
                    })
                    .then(data => {
                        document.getElementById('interpretationDisplay').textContent = data.interpretation;
                    })
                    .catch(error => console.error('Error:', error));
                }
        
                document.getElementById('interpretButton').addEventListener('click', interpretPoem);
            });
            
            </script>
    </div>
</body>
</html>
